"use strict";var _app={};_app.init=function(){for(var a in _app)_app[a].init&&_app[a].init()},_app.queryString=function(){var a=window.location.search.substr(1).split("&");if(""==a)return{};var b={},c=!0,d=!1,e=void 0;try{for(var f,g=a[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=f.value;h=h.split("=",2),1==h.length?b[h[0]]="":b[h[0]]=decodeURIComponent(h[1].replace(/\+/g," "))}}catch(a){d=!0,e=a}finally{try{!c&&g.return&&g.return()}finally{if(d)throw e}}return b},window.onload=function(){_app.init()},window.App=_app,App.country_search={apiUrl:"https://jsonmock.hackerrank.com/api/countries/search",init:function(){var a=document.querySelector("#myForm"),b=App.queryString();a.onsubmit=App.country_search.formHandler,b.s&&(a.country_search.value=b.s,b.p&&(maxPopulation=parseInt(b.p)),App.country_search.search(b.s))},updateHistory:function(a){history.pushState({},"",window.location.pathname+"?s="+a)},formHandler:function(a){a.preventDefault();var b=this.country_search.value||alert(this.getAttribute("data-errorMsg"));b&&App.country_search.search(b)},filter:function(a){return a.population&&a.population<maxPopulation},search:function(a){var b=App.queryString(),c=b.page||1;return b.s!=a&&(b.s=a,App.country_search.pagination.query=b,App.country_search.updateHistory(a)),fetch(App.country_search.apiURL+"?name="+a+"&page="+c).then(function(a){return a.json()}).then(function(a){var b=App.country_search.pagination;b.items=a.data,b.itemsPerPage=a.per_page,b.pageCount=a.total_pages,b.currentPage=a.page,b.render()})},pagination:{items:[],itemsPerPage:10,currentPage:1,pageCount:1,query:App.queryString(),render:function(){App.country_search.pagination.renderResults(),App.country_search.pagination.renderNav()},renderResults:function(){var a="",b=function(b){return a+="<li>",a+='<a data-toggle="collapse" href="#panel-'+b.alpha3Code+'" role="button" aria-expanded="false" aria-controls="panel-'+b.alpha3Code+'">'+b.name+"</a>",a+='<div class="collapse" id="panel-'+b.alpha3Code+'">\n\t\t\t\t  <div class="card card-body">\n\t\t\t\t    Alternative Spellings: '+b.altSpellings.join(", ")+" <br>\n\t\t\t\t    Area: "+b.area+" (sq. km) <br>\n\t\t\t\t    Capital: "+b.capital+" <br>\n\t\t\t\t    Lat and Lng: "+b.latlng.join(", ")+" <br>\n\t\t\t\t    Name: "+b.name+" <br>\n\t\t\t\t    Population: "+b.population+" <br>\n\t\t\t\t    Timezones: "+b.timezones.join(", ")+" <br>\n\t\t\t\t    Top Level Domain Name Extensions: "+b.topLevelDomain.join(", ")+" <br>\n\t\t\t\t    Calling Code: "+b.callingCodes.join(", ")+" <br>\n\t\t\t\t    Region: "+b.region+" <br>\n\t\t\t\t    Subregion: "+b.subregion+" <br>\n\t\t\t\t    Native Name: "+b.nativeName+" <br>\n\t\t\t\t    Languages: "+b.languages.join(", ")+" \n\t\t\t\t  </div>\n\t\t\t\t</div>",a+="</li>"},c=!0,d=!1,e=void 0;try{for(var f,g=App.country_search.pagination.items[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=f.value;App.country_search.filter(h)&&(document.querySelector("#searchResults").innerHTML=b(h))}}catch(a){d=!0,e=a}finally{try{!c&&g.return&&g.return()}finally{if(d)throw e}}},renderNav:function(){var a=function(a){var b="",c=JSON.parse(JSON.stringify(App.country_search.pagination.query));c.page=parseInt(a),"previous"==a&&(c.page=parseInt(App.country_search.pagination.currentPage)-1),"next"==a&&(c.page=parseInt(App.country_search.pagination.currentPage)+1);var d=[];for(var e in c)d.push(e+"="+c[e]);var f=window.location.pathname+"?"+d.join("&");return parseInt(a)==App.country_search.pagination.currentPage&&(b=" active",f="#"),'<li class="page-item'+b+'"><a class="page-link" href="'+f+'">'+a+"</a></li>"},b="",c=a("previous"),d=a("next");if(1==App.country_search.pagination.currentPage&&(c=""),App.country_search.pagination.currentPage==App.country_search.pagination.pageCount&&(d=""),b+=c,App.country_search.pagination.pageCount>1)for(var e=1;e<=App.country_search.pagination.pageCount;e++)b+=a(e);b+=d,document.querySelector("#searchNav").innerHTML=b}}};