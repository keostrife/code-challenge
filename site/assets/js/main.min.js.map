{"version":3,"sources":["main.min.js"],"names":["_app","init","i","queryString","string","window","location","search","substr","split","data","pair","length","decodeURIComponent","replace","onload","App","country_search","form","document","querySelector","onsubmit","formHandler","value","maxPopulation","parseInt","updateHistory","history","pushState","pathname","e","preventDefault","s","alert","filter","item","population","query","page","pagination","fetch","then","res","json","items","itemsPerPage","per_page","pageCount","total_pages","currentPage","render","renderResults","renderNav","resultHtml","alpha3Code","name","altSpellings","join","area","capital","latlng","timezones","topLevelDomain","callingCodes","region","subregion","nativeName","languages","innerHTML","renderNavItem","current","JSON","parse","stringify","key","push","link","navHtml","prevBtn","nextBtn"],"mappings":"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","file":"main.min.js","sourcesContent":["{\r\n\tlet _app = {};\r\n\r\n\t_app.init = () => {\r\n\t\tfor(let i in _app) {\r\n\t\t\tif (_app[i].init) _app[i].init();\r\n\t\t}\r\n\t}\r\n\r\n\t_app.queryString = () => {\r\n\t\tlet string = window.location.search.substr(1).split('&');\r\n\t    if (string == \"\") return {};\r\n\t    let data = {};\r\n\t    for (let pair of string) {\r\n\t    \tpair=pair.split('=', 2);\r\n\t    \tif (pair.length == 1)\r\n\t    \t    data[pair[0]] = \"\";\r\n\t    \telse\r\n\t    \t    data[pair[0]] = decodeURIComponent(pair[1].replace(/\\+/g, \" \"));\r\n\t    }\r\n\t    return data;\r\n\t}\r\n\r\n\r\n\twindow.onload = ()=>{\r\n\t\t_app.init();\r\n\t}\r\n\r\n\twindow.App = _app;\r\n};App.country_search = {\r\n\tinit: () => {\r\n\t\tlet form = document.querySelector(\"#myForm\");\r\n\t\tlet queryString = App.queryString();\r\n\r\n\t\tform.onsubmit = App.country_search.formHandler;\r\n\r\n\t\t//if s is in query string search right away\r\n\t\tif(queryString[\"s\"]) {\r\n\t\t\tform.country_search.value = queryString[\"s\"];\r\n\t\t\tif(queryString[\"p\"]) maxPopulation = parseInt(queryString[\"p\"]);\r\n\t\t\tApp.country_search.search(queryString[\"s\"]);\r\n\t\t}\r\n\t},\r\n\tupdateHistory: (search)=>{\r\n\t\thistory.pushState({}, \"\", window.location.pathname+\"?s=\"+search);\r\n\t},\r\n\tformHandler: function(e){\r\n\t\te.preventDefault();\r\n\t\tlet s = this.country_search.value || alert(\"please enter a search value\");\r\n\t\tif(s) {\r\n\t\t\tApp.country_search.search(s);\r\n\t\t}\r\n\t\t\r\n\t},\r\n\tfilter: (item)=>{\r\n\t\tif(item && item.population && item.population > 1 && item.population < maxPopulation) return true;\r\n\t\treturn false;\r\n\t},\r\n\tsearch: (s)=>{\r\n\t\t//updating history\r\n\t\tlet query = App.queryString();\r\n\t\tlet page = query[\"page\"] || 1;\r\n\t\tif(query.s != s) {\r\n\t\t\tquery.s = s;\r\n\t\t\tApp.country_search.pagination.query = query;\r\n\t\t\tApp.country_search.updateHistory(s);\r\n\t\t}\r\n\r\n\t\treturn fetch(`https://jsonmock.hackerrank.com/api/countries/search?name=${s}&page=${page}`)\r\n\t\t\t.then((res)=>{return res.json()})\r\n\t\t\t.then((data)=>{\r\n\t\t\t\tlet pagination = App.country_search.pagination;\r\n\t\t\t\tpagination.items = data.data;\r\n\t\t\t\tpagination.itemsPerPage = data.per_page;\r\n\t\t\t\tpagination.pageCount = data.total_pages;\r\n\t\t\t\tpagination.currentPage = data.page;\r\n\t\t\t\tpagination.render();\r\n\t\t\t});\r\n\t},\r\n\tpagination: {\r\n\t\titems: [],\r\n\t\titemsPerPage: 10,\r\n\t\tcurrentPage: 1,\r\n\t\tpageCount: 1,\r\n\t\tquery: App.queryString(),\r\n\t\trender: ()=>{\r\n\t\t\tApp.country_search.pagination.renderResults();\r\n\t\t\tApp.country_search.pagination.renderNav();\r\n\t\t},\r\n\t\trenderResults: ()=>{\r\n\t\t\tlet resultHtml = \"\";\r\n\t\t\tfor(let item of App.country_search.pagination.items) {\r\n\t\t\t\tif(!App.country_search.filter(item)) continue;\r\n\t\t\t\tresultHtml += \"<li>\";\r\n\t\t\t\tresultHtml += `<a data-toggle=\"collapse\" href=\"#panel-${item.alpha3Code}\" role=\"button\" aria-expanded=\"false\" aria-controls=\"panel-${item.alpha3Code}\">${item.name}</a>`;\r\n\t\t\t\tresultHtml += `<div class=\"collapse\" id=\"panel-${item.alpha3Code}\">\r\n\t\t\t\t  <div class=\"card card-body\">\r\n\t\t\t\t    Alternative Spellings: ${item.altSpellings.join(', ')} <br>\r\n\t\t\t\t    Area: ${item.area} (sq. km) <br>\r\n\t\t\t\t    Capital: ${item.capital} <br>\r\n\t\t\t\t    Lat and Lng: ${item.latlng.join(\", \")} <br>\r\n\t\t\t\t    Name: ${item.name} <br>\r\n\t\t\t\t    Population: ${item.population} <br>\r\n\t\t\t\t    Timezones: ${item.timezones.join(\", \")} <br>\r\n\t\t\t\t    Top Level Domain Name Extensions: ${item.topLevelDomain.join(\", \")} <br>\r\n\t\t\t\t    Calling Code: ${item.callingCodes.join(\", \")} <br>\r\n\t\t\t\t    Region: ${item.region} <br>\r\n\t\t\t\t    Subregion: ${item.subregion} <br>\r\n\t\t\t\t    Native Name: ${item.nativeName} <br>\r\n\t\t\t\t    Languages: ${item.languages.join(\", \")} \r\n\t\t\t\t  </div>\r\n\t\t\t\t</div>`;\r\n\t\t\t\tresultHtml += \"</li>\";\r\n\t\t\t\tdocument.querySelector(\"#searchResults\").innerHTML  = resultHtml;\r\n\t\t\t}\r\n\t\t},\r\n\t\trenderNav: ()=>{\r\n\t\t\tlet renderNavItem = (page)=>{\r\n\t\t\t\tlet current = '';\r\n\r\n\t\t\t\t//maintain the current querystring for nav links\r\n\t\t\t\tlet query = JSON.parse(JSON.stringify(App.country_search.pagination.query));\r\n\t\t\t\tquery.page = parseInt(page);\r\n\t\t\t\tif(page==\"previous\") query.page = parseInt(App.country_search.pagination.currentPage)-1;\r\n\t\t\t\tif(page==\"next\") query.page = parseInt(App.country_search.pagination.currentPage)+1;\r\n\r\n\t\t\t\tlet queryString = [];\r\n\t\t\t\tfor(let key in query) {\r\n\t\t\t\t\tqueryString.push(key+\"=\"+query[key]);\r\n\t\t\t\t}\r\n\t\t\t\tlet link = window.location.pathname+\"?\"+queryString.join(\"&\");\r\n\t\t\t\tif(parseInt(page) == App.country_search.pagination.currentPage) {\r\n\t\t\t\t\tcurrent = ' active';\r\n\t\t\t\t\tlink = '#';\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn `<li class=\"page-item${current}\"><a class=\"page-link\" href=\"${link}\">${page}</a></li>`;\r\n\t\t\t}\r\n\t\t\tlet navHtml = '';\r\n\t\t\tlet prevBtn = renderNavItem(\"previous\");\r\n\t\t\tlet nextBtn = renderNavItem(\"next\");\r\n\t\t\tif(App.country_search.pagination.currentPage == 1) prevBtn = '';\r\n\t\t\tif(App.country_search.pagination.currentPage == App.country_search.pagination.pageCount) nextBtn = '';\r\n\r\n\t\t\tnavHtml += prevBtn;\r\n\t\t\tif(App.country_search.pagination.pageCount > 1)\r\n\t\t\t\tfor(let page = 1; page <= App.country_search.pagination.pageCount; page++) {\r\n\t\t\t\t\tnavHtml += renderNavItem(page);\r\n\t\t\t\t}\r\n\t\t\tnavHtml += nextBtn;\r\n\r\n\t\t\tdocument.querySelector(\"#searchNav\").innerHTML  = navHtml;\r\n\t\t}\r\n\t}\r\n}"]}